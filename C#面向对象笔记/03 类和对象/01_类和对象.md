## 本节目标
1. 理解类和对象
2. 类的定义（class）
2. 类成员的定义
3. 调用类成员
4. 访问修饰符和修饰符
5. get和set访问器



## 面向对象简介

面向对象程序设计（Object Oriented Programming，OOP）是一种计算机编程架构。

面向对象程序设计以对象为核心，是指在编程时将任何事物都看成是一个对象来描述。

对象包括属性和方法，属性是指对象固有的特征，方法则是对象的行为。

对象间通过消息传递相互通信，来模拟现实世界中不同实体间的联系。在面向对象的程序设计中，对象是组成程序的基本模块。

例如将手机看作是一个对象，手机的大小、颜色、品牌都可以看作是一个特征，即属性，而打电话、发短信、上网是手机的行为，即方法。

面向过程的编程是把一个操作从头到尾写在一起，编程过程简单但缺乏可重用性，不方便软件的移植。

面向对象编程则是对传统的面向过程编程的一种颠覆，让编程看起来更容易理解，同时也增强了代码的重用性。

面向对象语言的三大特征分别是封装、继承、多态。下面分别介绍这三大特征。

1. 封装

	封装就好像把所有的硬件设施放到手机里，而用户只能看到手机的外观，看不到手机内部的结构和硬件配置。

	在 C# 语言中能体现封装特性的编程元素有很多，例如类、接口、方法等。

	封装的好处就是能让用户只关心对象的用法而不用关心对象的实现，在为用户的访问提供了便利的同时也提高了程序的安全性。

2. 继承

	世界上第一部手机是由被称为手机之父的马丁•库帕在 1973 年开发的，如下图所示。

![](01_类和对象_files/1.jpg)


从第一部手机问世发展至今，手机经历了多次巨变，但最基础的外观设计中的数字键和功能键以及打电话、发短信的功能被保留，只是在此基础上让手机的外观更加美观、操作更加简单、提供更多的功能满足用户的需求。

现在人们使用的智能手机实际上就是继承的实例，因此可以将继承理解为在保留原有功能的基础上进行改进的过程。

在 C# 语言中继承关系主要体现在类之间的继承，这样既能减少开发时的代码量又方便了程序的复用。

3. 多态

	多态的概念是很好理解的，现在的手机品牌众多，样式也各不相同，但最基本的功能和键盘设计等还是一致的，那么这些不同种类的手机就体现了一种多态的特性。

	在 C# 语言中多态是通过类的继承或接口的实现来体现的，多态给程序带来的最大好处与继承类似，即提高了程序的复用性和可移植性。




## C# 类和对象

在 C# 语言中创建的任何项目都有类的存在，通过类能很好地体现面向对象语言中封装、继承、多态的特性。

类是对现实世界的抽象，包括表示静态属性的数据和对数据的操作，对象是类的实例化。

	类
	
	- 对现实中的事物进行分类，归纳共同点，描述一类事物的特征
	- 具有相同属性和方法
	
	对象
	
	- 类的具体事物：一个具体的个体
	- 类中方法的执行者
	
	类和对象的使用
	
	1. 定义类
	2. 实例化类 产生对象
	3. 使用对象


## 类的定义
在前面的学习中已经多次使用过类，类定义的语法形式并不复杂，请记住 class 关键字，它是定义类的关键字。

类定义的具体语法形式如下。

```c#
	[类的访问修饰符]  [修饰符]  class  类名
	{
		类的成员
	}
```

其中：
1. 类的访问修饰符：用于设定对类的访问限制，包括 public、internal 或者不写，用 internal 或者不写时代表只能在当前项目中访问类；public 则代表可以在任何项目中访问类。

2. 修饰符：修饰符是对类本身特点的描述，包括 abstract、sealed 和 static。abstract 是抽象的意思，使用它修饰符的类不能被实例化；sealed 修饰的类是密封类，不能 被继承；static 修饰的类是静态类，不能被实例化。

3. 类名：类名用于描述类的功能，因此在定义类名时最好是具有实际意义，这样方便用户理解类中描述的内容。在同一个命名空间下类名必须是唯一的。

4. 类的成员：在类中能定义的元素，主要包括字段、属性、方法。

【实例】

```
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;
    namespace code_1
    {
        class Test
        {
        }
    }
```

​	

从 Test 类可以看出，默认情况下创建的类在 class 关键字前面没有任何修饰符，因此默认创建的类能在同一个项目中被访问。

另外，在同一个命名空间中也可以定义多个类。例如上面代码所示的文件中再定义一个名为 Test1 的类，代码如下。

		namespace code_1
		{
			class Test
			{
			}
			class Test1
			{
			}
		}

尽管可以在一个命名空间中定义多个类，但不建议使用这种方式，最好是每一个文件定义一个类，这样方便阅读和查找。

用户不仅可以在控制台应用程序中添加类，在之后的学习中我们还将会介绍的其他类型的应用程序中也可以添加类，添加的方法是类似的。


## 类的成员

在 C# 语言中类定义后就要确定类中包含的内容，类中包含的内容被称为类中的成员。

类中的成员包括字段、属性、方法。每个类成员在定义时需要指定访问修饰符、修饰符。

### 访问修饰符

类的访问修饰符主要有两个，即 internal 和 public,如果省略了访问修饰符，即为 internal。

类中成员的访问修饰符有 4 个，具体用法如下。

| **访问修饰符** | **说明**                                 |
| -------------- | ---------------------------------------- |
| public         | 公开的，无限制条件，任何代码都可以访问。 |
| internal       | 可被同一个程序集（项目）的所有代码访问   |
| protected      | 可被自己或者子类的代码访问               |
| private        | 私有的，只有自己的代码才能访问。         |

### 字段的定义
与前面介绍的变量和常量的定义类似，只是在变量或常量前面可以加上访问修饰符、修饰符。

作用与变量一样用来存储类的对象的相关数据。

在修饰字段时通常用两个修饰符，即readonly （只读）和static （静态的）。

- 使用 readonly 修饰字段意味着只能读取该字段的值而不能给字段赋值。

- 使用 static 修饰的字段是静态字段，可以直接通过类名访问该字段。

需要注意的是常量不能使用 static 修饰符修饰。

定义字段的语法形式如下。

```
[访问修饰符]  [修饰符]  数据类型  字段名；
```

在这里访问修饰符和修饰符都是可以省略的，并且访问修饰符和修饰符的位置也可以互换，但从编码习惯上来说通常将访问修饰符放到修饰符的前面。此外，在类中定义字段时字段名是唯一的。

【实例】在 Test 类中分别定义使用不同修饰符的字段。

根据题目要求，代码如下。

```C#
	namespace code_1
	{
		class Test
		{
			private int id;                         //定义私有的整型字段 id
			public readonly string name;            //定义公有的只读字符串类型字段 name
			internal static int age;                //定义内部的静态的整型字段 age
			private const string major = "计算机";  //定义私有的字符串类型常量 major
		}
	}
```

通过上面的语句演示了不同修饰符字段的定义，重点是记住这些修饰符的使用。

字段在类中定义完成后，在类加载时，会自动为字段赋值，不同数据类型的字段默认值不同， 如下表所示。

|**数据类型**|**默认值**|
|----------|---------|
|整数类型 	|0|
|浮点型	 | 0|
|字符串类型	|空值|
|字符型	  |  a|
|布尔型	  |  False|
|其他引用类型	|空值|

### 属性的定义

在C#中我们可以很自由的访问public字段，但可能会被恶意赋值；使用private 又不能在类之外使用，使用但有时我们可能需要某字段只能读或者写，或在改变字段值得时候做一些其他事情，显然这些仅仅依靠字段是无法实现的，于是便有了属性。

**属性的作用时对字段进行保护**，我们将属性设置为public，可以直接访问属性；属性保护的字段设置成private ,我们通过属性简接操作字段。

提供了 **get 访问器和 set 访问器，分别用于获取或设置字段的值。**

get 访问器和 set 访问器的使用与方法非常类似，可以在操作字段时根据一些规则和条件来设置或获取字段的值。

此外，为了保证字段的安全性，还能选择省去 get 访问器或 set 访问器。

定义属性的语法形式如下。

```C#
	public    数据类型    属性名
	{
		get
		{
			
			return 字段名;
		}
		set
		{
			字段名 = value;
		}
	}
```

其中：

1. 数据类型：和要保护的字段数据类型一样；

2. 属性名：和字段名一样，但是首字母大写；

3. get：又称get 访问器，用于获取属性的值；需要在 get 语句最后使用 return 关键字返回一个与属性数据类型相兼容的值。

   当通过属性名取值时，会自动调用get执行里面的代码。

   若在属性定义中省略了该访问器，则不能在其他类中获取私有类型的字段值，因此也称为只写属性。

4. set：又称set 访问器，用于设置字段的值，这里需要使用一个特殊的值 value，代表赋给属性的值，然后再将它赋值给字段。

   当通过属性名给字段赋值的时候，会自动调用set的代码。

   在 set 访问器省略后无法在其他类中给字段赋值，因此也称为只读属性。

通常属性名的命名使用的是 Pascal 命名法，单词的首字母大写，如果是由多个单词构成，每个单词的首字母大写。

由于属性都是针对某个字段赋值的，因此属性的名称通常是将字段中每个单词的首字母大写。例如定义了一个名为 name 的字段，属性名则为 Name。

【实例】定义一个图书信息类（Book），在类中定义图书编号（id）、图书名称（name）、图书价格（price）3 个字段，并分别为这 3 个字段设置属性，其中将图书名称设置为只读属性。

根据题目要求，代码如下。

```C#
	namespace code_1
	{
		class Book
		{
			private int id;
			private string name;
			private double price;
			//设置图书编号属性
			public int Id
			{
				get
				{
					return id;
				}
				set
				{
					id = value;
				}
			}
			//设置图书名称属性
			public string Name
			{
				get
				{
					return name;
				}
			}
			//设置图书价格属性
			public double Price
			{
				get
				{
					return price;
				}
				set
				{
					price = value;
				}
			}
		}
	}
```

在上面的实例中，在给字段赋值时直接将 value 值赋给字段，如果要对赋给字段的值加以限制，可以先判断 value 值是否满足条件，如果满足条件则赋值，否则给字段赋默认值或进行其他操作。

假设上面实例中的图书价格要求是大于 0 的，如果输入的值不满足条件，则将图书价格设置为 0。修改后的图书价格字段的属性代码如下。

```C#
		public double Price
		{
			get
			{
				return price;
			}
			set
			{
				if(value >= 0)
				{
					price = value;
				}
				else
				{
					price = 0;
				}
			}
		}
```

​	

通过上面的实例可以看出，在定义字段属性时，属性的作用就是为字段提供 get、set 访问器，由于操作都比较类似，在 C# 语言中可以将属性的定义简化成如下写法。

		public    数据类型    属性名{get;set;}

这种方式也被称为自动属性设置。简化后图书类中的属性设置的代码如下。

```C#
	public int Id{get; set;}
	public string Name{get; set;}
	public double Price{get; set;}
```

如果使用上面的方法来设置属性，则不需要先指定字段。如果要使用自动属性的方式来设置属性表示只读属性，直接省略 set 访问器即可。只读属性可以写成如下形式。

public int Id{get;}=1;

这里相当于将 Id 属性的值设置成 1，并且要以分号结束。但是，在使用自动生成属性的方法时不能省略 get 访问器，如果不允许其他类访问属性值，则可以在 get 访问器前面加上访问修饰符 private，代码如下。

public int Id{private get; set;}

这样，Id 属性的 get 访问器只能在当前类中使用。



### 方法的定义

在我们学习 C# 语言的过程中会发现之前的应用程序中默认会生成一个主方法 Main()，它是执行程序的入口和出口。

方法是将完成同一功能的内容放到一起，方便书写和调用的一种方式，也体现了面向对象语言中封装的特性。

定义方法的语法形式如下。

		[访问修饰符]  [修饰符]  返回值类型   方法名(<参数列表>)
		{
			语句块;
		}

其中：

1) 访问修饰符
所有类成员访问修饰符都可以使用，如果省略访问修饰符，默认是 private。

2) 修饰符
在定义方法时修饰符包括 virtual（虚拟的）、abstract（抽象的）、override（重写的）、static（静态的）、sealed（密封的）。override 是在类之间继承时使用的。

3) 返回值类型
用于在调用方法后得到返回结果，返回值可以是任意的数据类型，如果指定了返回值类型，必须使用 return 关键字返回一个与之类型匹配的值。如果没有指定返回值类型，必须使用 void 关键字表示没有返回值。

4) 方法名
对方法所实现功能的描述。方法名的命名是以 Pascal 命名法为规范的。

5)参数列表
在方法中允许有 0 到多个参数，如果没有指定参数也要保留参数列表的小括号。参数的定义形式是“数据类型参数名”，如果使用多个参数，多个参数之间需要用逗号隔开。

【实例 1】在 Test 类中定义一个方法输出指定字段的值。

根据题目要求，代码如下。

```C#
	namespace code_1
	{
		class Test
		{
			private int id;                         //定义私有的整型字段 id
			public readonly string name;            //定义公有的只读字符串类型字段 name
			internal static int age;                //定义内部的静态的整型字段 age
			private const string major = "计算机";  //定义私有的字符串类型常量 major
			private void PrintMsg()
			{
				Console.WriteLine("编号：" + id);
				Console.WriteLine("姓名：" + name);
				Console.WriteLine("年龄：" + age);
				Console.WriteLine("专业：" + major);
			}
		}
	}
```

执行上面的代码并不会有任何输出效果，因为在 C# 语言中方法必须调用才能执行其中的代码。

【实例 2】创建 Compute 类，分别定义 4 个方法实现两个数的加法、减法、乘法、除法的操作。

根据题目要求，代码如下。

```C#
	namespace code_1
	{
		class Compute
		{
			//加法
			private double Add(double num1,double num2)
			{
				return num1 + num2;
			}
			//减法
			private double Minus(double num1,double num2)
			{
				return num1 - num2;
			}
			//乘法
			private double Multiply(double num1,double num2)
			{
				return num1 * num2;
			}
			//除法
			private double Divide(double num1,double num2)
			{
				return num1 / num2;
			}
		}
	}
```

从上面的代码可以看出，在 Compute 类中定义了 4 个方法，每个方法都是有参数、有返回值的。

因为方法的定义有多种形式，所以可以用很多方法完成上面的实例。有兴趣的小伙伴可以尝试定义不同形式的方法来实现上面实例的功能。




## C#调用类成员

在前面的小节中已经了解了类中成员的定义，在本节将介绍如何访问类中的成员，即调用类的成员。

调用类的成员实际上使用的是类的对象，对于创建类的对象，首先可以将类理解成一个模板，类的对象则是按照这个模板定制的一个对象。

例如在创建一个 Word 文档时会自动按照 Word 中默认的文档模板(.dot)创建一个与之样式相同的文件。

创建类对象的语法 形式如下。

```c#
	类名 对象名 = new 类名();
```

上面的语法形式是一种简单形式，通过“对象名”即可调用类中的成员。调用的语法形式如下。

```
	对象名 . 类的成员
```

下面通过实例来演示如何使用对象名调用类的成员。

【实例 1】在Book类中添加一个方法，用于输出该类中的所有属性。

根据题目要求，代码如下。

```C#
	class Book
	{
		public int Id { get; set; }
		public string Name { get; set; }
		public double Price { get; set; }

		public void PrintMsg()
		{
			Console.WriteLine("图书编号：" + Id);
			Console.WriteLine("图书名称：" + Name);
			Console.WriteLine("图书价格：" + Price);
		}
	}
```

在项目的 Program.cs 文件里的 Main 方法中，加入调用 PrintMsg() 方法的代码。

```C#
	class Program
	{
		static void Main(string[] args)
		{
			Book book = new Book();
			book.PrintMsg();
		}
	}
```

执行上面代码，看下效果。

使用类的对象 调用方法

从上面的输出效果可以看出，如果没有对自定义的属性赋值，系统会默认为属性赋值。如果需要为属性赋值后做输出操作，则要在调用 PrintMsg() 前先对属性赋值，赋值并输出的代码如下。

```C#
	class Program
	{
		static void Main(string[] args)
		{
			Book book = new Book();
			//为属性赋值
			book.Id = 1;
			book.Name = "计算机基础";
			book.Price = 34.5;
			book.PrintMsg();
		}
	}
```

执行上面的代码，看下效果。

为属性赋值并输出

【实例 2】在 Book 类中添加一个向属性赋值的方法，并在 Main 方法中调用。

根据题目要求，代码如下。

```C# 
	class Book
	{
		public int Id { get; set; }
		public string Name { get; set; }
		public double Price { get; set; }
		public void SetBook(int id, string name, double price)
		{
			Id = id;
			Name = name;
			Price = price;
		}
		public void PrintMsg()
		{
			Console.WriteLine("图书编号：" + Id);
			Console.WriteLine("图书名称：" + Name);
			Console.WriteLine("图书价格：" + Price);
		}
	}
```

在 Main 方法中调用 SetBook 和 PrintMsg 方法，代码如下。

```C#
	class Program
	{
		static void Main(string[] args)
		{
			Book book = new Book();
			book.SetBook(1, "计算机基础", 34.5);
			book.PrintMsg();
		}
	}
```

执行上面的代码，效果【实例 1】中一致。

通过上面的实例可以了解类的对象调用属性和方法的基本用法，给属性赋值的代码如下。

类的对象 . 属性名 = 值;

如果要取得属性的值，直接使用“类的对象.属性名”即可。 使用类的对象调用方法的代码如下。
类的对象 . 方法名(参数);

注意：在调用方法时需要传递对应类型的参数。

## 总结

1. 类的定义用class关键字
2. 类的成员有字段，属性，方法；
3. 字段为类的特征，存放对象的数据；常用的访问修饰符为private。
4. 方法为类的行为，常用的修饰符为public。
5. 属性对字段进行访问性的保护，可以设置条件进行字段的访问。常用的访问修饰符为public.
6. get访问器读取字段值，set访问器设置字段值。
7. 类实例化后称为对象,用new关键字：类名  对象名 = new 类名();
8. 用“对象名.成员”进行类成员的调用。

