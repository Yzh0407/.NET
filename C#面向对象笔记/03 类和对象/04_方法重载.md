## 本节目标

1. 方法重载
2. 方法的参数（实参和形参）
3. ref关键字设置引用参数
4. out关键字设置输出参数

## C#方法重载

在《C#构造方法》时提到定义构造方法时提到可以定义带 0 到多个参数的构造方法，但构造方法的名称必须是类名。实际上，这就是一个典型的方法重载，即**方法名称相同、参数列表不同**。

参数列表不同主要体现在参数个数或参数的数据类型不同。在调用重载的方法时系统是根据所传递参数的不同判断调用的是哪个方法。

【实例 1】创建一个名为 SumUtils 的类，在类中分别定义计算两个整数、两个小数、 两个字符串类型的和，以及从 1 到给定整数的和。在 Main 方法中分别调用定义好的方法。

根据题目要求，分别定义 3 个带两个参数的方法，以及一个带一个整型参数的方法，代码如下。

```C#
	class SumUtils
	{
		public int Sum(int a,int b)
		{
			return a + b;
		}
		public double Sum(double a,double b)
		{
			return a + b;
		}
		public string Sum(string a,string b)
		{
			return a + b;
		}
		public int Sum(int a)
		{
			int sum = 0;
			for(int i = 1; i < a; i++)
			{
				sum += i;
			}
			return sum;
		}
	}
```

从上面的程序可以看出在该类中定义的方法名称都是 Sum,仅是参数的类型或个数不同而已。在 Main 方法中调用上述定义的方法，代码如下。

```C#
	class Program
	{
		static void Main(string[] args)
		{
			SumUtils s = new SumUtils();
			//调用两个整数求和的方法
			Console.WriteLine("两个整数的和为：" + s.Sum(3, 5));
			//调用两个小数求和的方法
			Console.WriteLine("两个小数的和为：" + s.Sum(3.2, 5.6));
			//调用两个字符串连接的方法
			Console.WriteLine("连个字符串的连接结果为：" + s.Sum("C#", "方法重载"));
			//输出 1 到 10 的和
			Console.WriteLine("1 到 10 的和为：" + s.Sum(10));
		}
	}
```

在调用 Sum 时只是传递的参数不同，系统会自动识别参数来调用正确的方法。

执行上面的代码，查看效果。

在该实例中演示的是一般方法的重载，构造方法也是可以重载的，在一个类中能定义多个构造方法，以方便根据不同的需要完成不同的类成员初始化操作。

【实例 2】定义一个 SayHello 的类，在类中分别定义 3 个构造方法，一个是不带参数 的构造方法，用于打印“Hello”； 一个是带一个参数的构造方法传递一个用户名，用于打 印“Hello Army”(Army 为传入的用户名)；一个是带两个参数的构造方法传递一个用户名 和年龄，用于打印“Hello Army,20”(Army 为传入的用户名、20 为传入的年龄)。在 Main 方法中使用不同的构造器创建 SayHello 类的对象。

根据题目要求，代码如下。

```C#
	class SayHello
	{
		public SayHello()
		{
			Console.WriteLine("Hello");
		}
		public SayHello(string name)
		{
			Console.WriteLine("Hello " + name);
		}
		public SayHello(string name, int age)
		{
			Console.WriteLine("Hello " + name + "，" + age);
		}
	}
```

在 Main 方法中分别通过上面定义的构造器创建类的对象，代码如下。

```C#
	class Program
	{
		static void Main(string[] args)
		{
			SayHello say1 = new SayHello();
			SayHello say2 = new SayHello("小明");
			SayHello say3 = new SayHello("张三", 20);
		}
	}
```

### 小结

1. 方法重载：在一个类里面，多个同名的方法，参数类型或参数个数不同即构成方法的重载。

2. 在调用方法时，根据参数的个数和类型来区分调用的方法。

3. 仅仅方法的返回值类型不同，无法构成重载，编译会报错。



## C#方法的参数

### 形参和实参

方法中的参数分为形式参数和实际参数：

1. **形式参数被称为形参，是在方法定义中所写的参数；**

2. **实际参数被称为实参，是在调用方法时传递的参数；**

例如：

```c#
	public int Add(int a,int b)
	{
		return a+b;
	}
```

在上面的方法定义中，a 和 b 是形式参数。在 Print 调用方法时使用如下代码：

```C#
	public void Print()
	{
		Add(3,4);
        //调用Add方法，并且把实参的值传递给形参a和b;a=3;b=4
	}
```

在调用 Add 方法时传递的参数 3 和 4 即为实际参数。

在定义的方法体中修改形参的数据，会不会影响实参？

根据数据类型决定：

1. 值类型形参改变不会影响实参
2. 引用类型形参改变会影响实参



### 引用参数和输出参数

在 C# 语言中，方法中的参数除了定义数据类型外，还可以定义引用参数和输出参数。

1. ref 关键字：定义引用参数

2. out 关键字：定义输出参数

    

#### 引用参数（ref关键字）

C#语言的数据类型分为**值类型和引用类型**：int 、float等是值类型，string、数组和自定义类属于引用类型；

**值类型变量直接存放其数据值；引用类型变量存放的是存储数据的内存地址值；**

作为方法参数时，**值类型参数传递的是值，修改形参时不会影响到实参；引用类型参数传递的是内存地址，修改形参可以影响到实参**。

如果在某些情况下，传递是值类型的数据，却要求将修改的结果返回，怎么办？

在C#中，提供了ref关键字，将值类型的参数按照引用类型传递，形参发生数据修改，实参也同步修改。

**使用方式：在定义方法和调用方法时，需要设置为引用的参数都需要使用ref关键字显示声明；**

注意：

​		引用参数在方法中使用时必须为其赋值，并且必须是由变量赋予的值，不能是常量或表达式。

​		如果需要将方法中的每一个参数都设置为 ref 类型参数，则需要在每一个参数前面加上 ref 关键字修饰。

【实例 1】创建名为 RefClass 的类，在类中定义一个将传入的数放大5倍的方法，并将方法中传入的整数参数定义为 ref 类型的。

根据题目要求，代码如下。

```C#
	class RefClass
	{
		public void ExpandFive(ref int num)
		{
			num = num * 5;
		}
	}
```

在 Main 方法中调用 Judge 方法，代码如下。

```C#
	class Program
	{
		static void Main(string[] args)
		{
			RefClass refClass = new RefClass();
			int a = 20;
			bool result = refClass.ExpandFive(ref a);
			Console.WriteLine("放大5倍的结果是" + a);
		}
	}
```

执行上面的代码，看看效果。

从该实例中可以看出，在调用带有引用参数的方法时，实际参数必须是一个变量，并且在传值时必须加上 ref 关键字。

#### 输出参数（out 关键字）

输出参数相当于返回值,即在方法调用完成后可以将返回的结果存放到输出参数中。

**输出参数多用于一个方法需要返回多个值的情况**。需要注意的是，在使用输出参数时，**必须在方法调用完成前为输出参数赋值**。

【实例 2】创建一个 OutClass 类，在类中定义与【实例 1】类似的方法，只是在方法的参 数中增加一个输出参数，用于返回计算的结果。

根据题目要求，代码如下。

```C#
	class OutClass
	{
		public void ExpandFive(int num, out int result)
		{
			result = num * 5;
		}
	}
```

在 Main 中调用该方法，代码如下。

```C#
	class Program
	{
		static void Main(string[] args)
		{
			OutClass outClass = new OutClass();
			int rs;
			outClass.ExpandFive(20, out rs);
			Console.WriteLine(rs);
		}
	}
```

执行上面的代码，看看效果。

从该实例中可以看出，在使用输出参数时，必须在方法操作结束前为带输出参数的形式参数赋值。

在调用含有带输出参数的方法时，必须在传递参数时使用 out 关键字，但不必给输出参数赋值。

ref和out关键字语法类似，ref重在修改参数的数据，在调用方式时其参数必须赋初始值；out重在带回执行结果，在调用方法时可以没有初始值。

### 小结

1. 定义方法时的变量为形参，调用方法时的变量或值为实参；
2. ref关键字设置引用参数，将值类型的参数转换为引用类型的参数，可以通过将形参修改值传递回实参变量；
3. out关键字设置输出参数，将形参的值返回到实参变量中，通常用于需要多个返回值的方法中。



## 练习

1. 定义一个计算图形面积的类，类中定义计算面积的方法：分别计算圆面积和长方形面积两个方法。

